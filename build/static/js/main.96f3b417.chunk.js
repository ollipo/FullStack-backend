(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),a=t.n(c),o=t(6),r=t(3),u=t(2),i=t(0),l=function(e){var n=e.persons,t=e.filterName,c=e.handleDelete;return console.log("FilteredPersons: ",n),Object(i.jsx)("div",{children:n.filter((function(e){return e.name.search(new RegExp(t,"i"))>-1})).map((function(e){return Object(i.jsxs)("p",{children:[e.name,e.number,Object(i.jsx)("button",{onClick:function(){return c(e.id,e.name)},children:"delete"})]},e.id)}))})},s=function(e){var n=e.handleNameFiltering,t=e.filterName;return console.log(t),Object(i.jsx)("input",{value:t,onChange:n})},d=function(e){var n=e.addName,t=e.newName,c=e.handleNameChange,a=e.newNumber,o=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name:",Object(i.jsx)("input",{value:t,onChange:c})]}),Object(i.jsxs)("div",{children:["number:",Object(i.jsx)("input",{value:a,onChange:o})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},j=t(4),b=t.n(j),f="/api/persons",m=function(){return b.a.get(f).then((function(e){return e.data}))},h=function(e){return b.a.post(f,e).then((function(e){return e.data}))},O=function(e,n){console.log("update: ",e,n);var t=b.a.put("".concat(f,"/").concat(e),n);return t.then((function(e){return e.data})).catch((function(e){return t}))},g=function(e){b.a.delete("".concat(f,"/").concat(e))},v=function(){var e=Object(u.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),j=Object(r.a)(a,2),b=j[0],f=j[1],v=Object(u.useState)(""),p=Object(r.a)(v,2),x=p[0],N=p[1],w=Object(u.useState)(""),C=Object(r.a)(w,2),S=C[0],k=C[1],D=Object(u.useState)(null),y=Object(r.a)(D,2),T=y[0],E=y[1],F=Object(u.useState)(null),I=Object(r.a)(F,2),P=I[0],J=I[1];console.log("alku: ",t),Object(u.useEffect)((function(){m().then((function(e){c(e)}))}),[]);var R=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"notification",children:n})},A=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"errorMessage",children:n})};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),"filter shown with",Object(i.jsx)(s,{handleNameFiltering:function(e){k(e.target.value)},filterName:S}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(d,{addName:function(e){e.preventDefault();var n={name:b,number:x};if(t.some((function(e){return e.name===b}))){if(window.confirm("".concat(b," is already added to phonebook. Replace the old number with a new one?"))){var a=t.find((function(e){return e.name===b}));console.log("person: ",a);var r=Object(o.a)(Object(o.a)({},a),{},{number:x});console.log("changedPersonId: ",r.id),O(r.id,r,J).then((function(e){console.log("response: ",e),c(t.map((function(e){return e.id!==r.id?e:r}))),E("Changed number of ".concat(r.name)),setTimeout((function(){E(null)}),3e3),f(""),N("")})).catch((function(e){J("Information of '".concat(r.name,"' has already been removed from server")),setTimeout((function(){J(null)}),3e3),f(""),N("")}))}}else h(n).then((function(e){c(t.concat(e)),E("Added ".concat(e.name)),setTimeout((function(){E(null)}),3e3),f(""),N("")}))},newName:b,handleNameChange:function(e){console.log(e.target.value),f(e.target.value)},newNumber:x,handleNumberChange:function(e){console.log(e.target.value),N(e.target.value)}}),Object(i.jsx)(R,{message:T}),Object(i.jsx)(A,{message:P}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(l,{persons:t,filterName:S,handleDelete:function(e,n){window.confirm("Delete ".concat(n," ?"))&&(g(e),c(t.filter((function(n){return n.id!==e}))),E("Deleted ".concat(n)),setTimeout((function(){E(null)}),3e3))}})]})};t(39);a.a.render(Object(i.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.96f3b417.chunk.js.map