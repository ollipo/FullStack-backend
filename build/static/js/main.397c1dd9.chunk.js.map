{"version":3,"sources":["components/FilteredPersons.js","components/FilterInput.js","components/PersonForm.js","services/persons.js","App.js","index.js"],"names":["FilteredPersons","persons","filterName","handleDelete","console","log","filter","person","name","search","RegExp","map","number","onClick","id","FilterInput","handleNameFiltering","value","onChange","PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","axios","get","then","response","data","newObject","post","request","put","catch","error","delete","App","useState","setPersons","setNewName","setNewNumber","setFilterName","notification","setNotification","errorMessage","setErrorMessage","useEffect","personService","initialPersons","Notification","message","className","ErrorMessage","event","target","preventDefault","nameObject","some","window","confirm","find","changedPerson","setTimeout","returnedPerson","concat","n","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.397c1dd9.chunk.js","sourcesContent":["import React from 'react'\r\n\r\n//Filters persons by users input values and maps them to the screen\r\nconst FilteredPersons = ({ persons, filterName, handleDelete }) => {\r\n    console.log('FilteredPersons: ', persons)\r\n    return (\r\n        <div>\r\n            {persons.filter(person => person.name.search(new RegExp(filterName, 'i')) > -1)\r\n                .map(person =>\r\n                    <p key={person.id}>\r\n                        {person.name} \r\n                        {person.number}\r\n                        <button onClick={() => handleDelete(person.id, person.name)}>delete</button>\r\n                    </p>)}     \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilteredPersons","import React from 'react'\r\n\r\n//Takes the users filter input and sets it to the filtername's state\r\nconst FilterInput = ({ handleNameFiltering, filterName }) => {\r\n    console.log(filterName)\r\n    return (\r\n        <input \r\n            value={filterName}\r\n            onChange={handleNameFiltering}\r\n      />\r\n    )\r\n}\r\n\r\nexport default FilterInput","import React from 'react'\r\n\r\n//Takes users name and number input and adds them to the phonebook\r\nconst PersonForm = ({ \r\n    addName, \r\n    newName, \r\n    handleNameChange, \r\n    newNumber, \r\n    handleNumberChange }) => {\r\n\r\n    return (\r\n        <form onSubmit={addName}>\r\n        <div>\r\n          name: \r\n            <input\r\n              value={newName}\r\n              onChange={handleNameChange} \r\n            />\r\n        </div>\r\n        <div>\r\n          number: \r\n            <input\r\n              value={newNumber}\r\n              onChange={handleNumberChange} \r\n            />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\n\r\nexport default PersonForm","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n  }\r\n  \r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n  \r\nconst update = (id, newObject) => {\r\n    console.log('update: ', id, newObject)\r\n    const request= axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request\r\n    .then(response => response.data)\r\n    .catch(error => request)\r\n}\r\n\r\nconst destroy = (id) => {\r\n    axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport default { getAll, create, update, destroy }","import React, { useState, useEffect } from 'react'\nimport FilteredPersons from './components/FilteredPersons'\nimport FilterInput from './components/FilterInput'\nimport PersonForm from './components/PersonForm'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterName, setFilterName ] = useState('')\n  const [ notification, setNotification ] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  console.log('alku: ', persons)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const addName = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n    }\n\n    if(persons.some(person => person.name === newName)) {\n      if (window.confirm(`${newName} is already added to phonebook. Replace the old number with a new one?`)) {\n        const person = persons.find(person => person.name === newName)\n        console.log('person: ', person)\n        const changedPerson = { ...person, number: newNumber }\n        console.log('changedPersonId: ', changedPerson.id)\n      \n        personService\n          .update(changedPerson.id, changedPerson, setErrorMessage)\n          .then(response => {\n            console.log('response: ', response)\n            setPersons(persons.map(person => person.id !== changedPerson.id ? person : changedPerson))\n            setNotification(\n              `Changed number of ${changedPerson.name}`\n            )\n            setTimeout(() => {\n              setNotification(null)\n            }, 3000)\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            setErrorMessage(\n              `Information of '${changedPerson.name}' has already been removed from server`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 3000)\n            setNewName('')\n            setNewNumber('')\n          })\n      }\n    } else {\n      personService\n      .create(nameObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNotification(\n          `Added ${returnedPerson.name}`\n        )\n        setTimeout(() => {\n          setNotification(null)\n        }, 3000)\n        setNewName('')\n        setNewNumber('')\n      })\n      .catch(error => {\n        setErrorMessage(\n          `${error.response.data.error}`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 3000)\n      })\n    }\n  }\n\n  const handleDelete = (id, name) => {\n    if (window.confirm(`Delete ${name} ?`)) {\n      personService.destroy(id)\n      setPersons(persons.filter(n => n.id !== id))\n      setNotification(\n        `Deleted ${name}`\n      )\n      setTimeout(() => {\n        setNotification(null)\n      }, 3000)\n    }\n  }\n\n  const Notification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"notification\">\n        {message}\n      </div>\n    )\n  }\n\n  const ErrorMessage = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"errorMessage\">\n        {message}\n      </div>\n    )\n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleNameFiltering = (event) => {\n    setFilterName(event.target.value)\n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      filter shown with \n      <FilterInput \n        handleNameFiltering={handleNameFiltering} \n        filterName={filterName}\n      />\n      <h2>add a new</h2>\n      <PersonForm \n        addName={addName}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />      \n      <Notification message={notification} />\n      <ErrorMessage message={errorMessage} />\n      <h2>Numbers</h2>\n      <FilteredPersons \n        persons={persons} \n        filterName={filterName} \n        handleDelete={handleDelete}\n      />\n    </div>\n  )\n\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}